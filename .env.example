# Application Configuration
NODE_ENV=production
PORT=3000

# Authentication
AUTH_ENABLED=false
AUTH_SESSION_SECRET=change_me_to_a_long_random_value
AUTH_SESSION_TTL_DAYS=30
AUTH_COOKIE_NAME=dasharr_session
AUTH_COOKIE_SECURE=false
AUTH_URL=http://localhost:5173
PLEX_OAUTH_CLIENT_ID=

# Radarr Configuration
RADARR_ENABLED=true
RADARR_URL=http://radarr:7878
RADARR_API_KEY=your_radarr_api_key_here

# Sonarr Configuration
SONARR_ENABLED=true
SONARR_URL=http://sonarr:8989
SONARR_API_KEY=your_sonarr_api_key_here

# Readarr Configuration
READARR_ENABLED=false
READARR_URL=http://readarr:8787
READARR_API_KEY=your_readarr_api_key_here

# Prowlarr Configuration
PROWLARR_ENABLED=true
PROWLARR_URL=http://prowlarr:9696
PROWLARR_API_KEY=your_prowlarr_api_key_here

# Plex Configuration
PLEX_ENABLED=true
PLEX_URL=http://plex:32400
PLEX_TOKEN=your_plex_token_here

# Tautulli Configuration
TAUTULLI_ENABLED=true
TAUTULLI_URL=http://tautulli:8181
TAUTULLI_API_KEY=your_tautulli_api_key_here

# Bazarr Configuration
BAZARR_ENABLED=false
BAZARR_URL=http://bazarr:6767
BAZARR_API_KEY=your_bazarr_api_key_here

# Tdarr Configuration
TDARR_ENABLED=false
TDARR_URL=http://host.docker.internal:8266
TDARR_API_KEY=your_tdarr_api_key_here
TDARR_LOCAL_DB_PATH=

# qBittorrent Configuration
QBITTORRENT_ENABLED=true
QBITTORRENT_URL=http://qbittorrent:8080
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=your_password_here

# RDTClient Configuration
RDTCLIENT_ENABLED=false
RDTCLIENT_URL=http://rdtclient:6500
RDTCLIENT_USERNAME=
RDTCLIENT_PASSWORD=

# SABnzbd Configuration
SABNZBD_ENABLED=false
SABNZBD_URL=http://sabnzbd:8080
SABNZBD_API_KEY=your_sabnzbd_api_key_here
SABNZBD_USERNAME=
SABNZBD_PASSWORD=

# TMDB Configuration
TMDB_ENABLED=false
TMDB_API_KEY=your_tmdb_api_key_here
TMDB_URL=https://api.themoviedb.org/3
TMDB_TIMEOUT=30000

# Trakt Configuration
TRAKT_ENABLED=false
TRAKT_CLIENT_ID=your_trakt_client_id_here
TRAKT_URL=https://api.trakt.tv
TRAKT_TIMEOUT=30000

# OMDb Configuration
OMDB_ENABLED=false
OMDB_API_KEY=your_omdb_api_key_here
OMDB_URL=https://www.omdbapi.com
OMDB_TIMEOUT=30000

# IGDB Configuration (for Games)
# Get your credentials at: https://api-docs.igdb.com/#getting-started
IGDB_ENABLED=false
IGDB_CLIENT_ID=your_igdb_client_id_here
IGDB_ACCESS_TOKEN=your_igdb_access_token_here
IGDB_TIMEOUT=30000

# FlareSolverr Configuration (for bypassing Cloudflare protection)
# Used for DODI repacks and other sites with Cloudflare protection
FLARESOLVERR_ENABLED=false
FLARESOLVERR_URL=http://flaresolverr:8191

# Game RSS Monitor Configuration
# Enable RSS feed monitoring for FitGirl repacks (checks every 15 minutes)
GAMES_RSS_MONITOR_ENABLED=true

# Cache Configuration
CACHE_TTL_DEFAULT=300
CACHE_TTL_QUEUE=10
CACHE_TTL_HEALTH=60
DOWNLOADS_DEDUPE_ARR=false

# Game library paths (for download badges)
GAMES_DIRS=D:/Games;E:/Games

# === Match Model / Hybrid Policy (Games) ===
# Model file location (inside container defaults to /app/data/match-model.json)
# MATCH_MODEL_PATH=/app/data/match-model.json
#
# MATCH_MODEL_POLICY:
# - gate   = current behavior: heuristic match must pass ML threshold
# - triage = three-way: accept / review / reject (review stays visible for approval UI)
MATCH_MODEL_POLICY=gate
#
# gate mode threshold override (defaults to model's baked threshold)
# MATCH_MODEL_THRESHOLD=0.34
#
# triage mode thresholds (defaults: accept=model threshold, reject=accept-0.10)
# MATCH_MODEL_ACCEPT_THRESHOLD=0.29
# MATCH_MODEL_REJECT_THRESHOLD=0.15
#
# Optional: sort queued candidates by ML probability first (defaults to true when triage is enabled)
# MATCH_SORT_BY_ML=true
#
# Optional: trust-specific overrides (apply to *_THRESHOLD, *_ACCEPT_THRESHOLD, *_REJECT_THRESHOLD)
# MATCH_MODEL_THRESHOLD_TRUSTED=0.25
# MATCH_MODEL_THRESHOLD_SAFE=0.28
# MATCH_MODEL_THRESHOLD_UNKNOWN=0.34
#
# Optional: source-specific overrides (apply to *_THRESHOLD, *_ACCEPT_THRESHOLD, *_REJECT_THRESHOLD)
# These take precedence over trust-specific overrides.
# Format: <BASE>_SOURCE_<SOURCEKEY>, where SOURCEKEY is uppercased and non-alnum replaced with '_'.
# Examples:
# MATCH_MODEL_ACCEPT_THRESHOLD_SOURCE_FITGIRL=0.62
# MATCH_MODEL_ACCEPT_THRESHOLD_SOURCE_DODI=0.62
# MATCH_MODEL_ACCEPT_THRESHOLD_SOURCE_REZI=0.62
# MATCH_MODEL_ACCEPT_THRESHOLD_SOURCE_HYDRA_STEAMRIP=0.62
# MATCH_MODEL_ACCEPT_THRESHOLD_SOURCE_PROWLARR_NZB_SU=0.70
#
# Optional: force specific sources into manual review (never auto-accept by ML).
# Comma-separated source keys. Supports prefix wildcard via trailing "*".
# Examples:
# MATCH_MODEL_FORCE_REVIEW_SOURCES=prowlarr:bitmagnet
# MATCH_MODEL_FORCE_REVIEW_SOURCES=prowlarr:bitmagnet,hydra:*
# MATCH_MODEL_FORCE_REVIEW_SOURCES=hydra:fitgirl repacks,hydra:dodi repacks
# MATCH_MODEL_FORCE_REVIEW_SOURCES=

# === Cross-Encoder Reranker (optional) ===
# Runs a small transformer reranker as an additional signal for match quality.
# Intended usage: enable MATCH_MODEL_POLICY=triage and set APPLY_TO=review
# so we only spend GPU cycles on borderline candidates.
#
# To run the service: docker compose -f docker/docker-compose.reranker.yml up --build
# If port 8000 is already taken (e.g. Portainer), set RERANKER_HOST_PORT=8001
# and update MATCH_RERANKER_URL accordingly.
RERANKER_HOST_PORT=8000
RERANKER_DATA_DIR=/tmp
MATCH_RERANKER_ENABLED=false
MATCH_RERANKER_URL=http://localhost:8000
# sort: annotate + sort by reranker score; triage: drop very low scores and mark review/accept bands
MATCH_RERANKER_POLICY=sort
# review: only candidates with "ml decision review"; all: rerank all candidates (more expensive)
MATCH_RERANKER_APPLY_TO=review
MATCH_RERANKER_MAX_CANDIDATES=30
MATCH_RERANKER_CONCURRENCY=4
MATCH_RERANKER_TIMEOUT_MS=2500
MATCH_RERANKER_ACCEPT_THRESHOLD=0.75
MATCH_RERANKER_REJECT_THRESHOLD=0.35
